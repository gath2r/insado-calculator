<!DOCTYPE html>
<html lang="ko">
<head>
    <meta name="naver-site-verification" content="20d9944d895cb6fe5c7a202f2ed6ccf64da71793" />
    <meta name="google-adsense-account" content="ca-pub-8367695516868688">
    <meta name="google-site-verification" content="n9D9TBUYdc_pfvWFDCWRnr1sJJE5Rfthotq1E_sH-1Y" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>인싸도 계산기</title>
    
    <meta name="description" content="내 인스타그램 계정은 인싸일까? 아싸일까? 팔로워, 팔로잉, 게시물 수로 나의 인싸력을 지금 바로 측정해보세요!">

    <meta property="og:type" content="website">
    <meta property="og:title" content="😎 인싸도 계산기 😮">
    <meta property="og:description" content="내 인스타그램 계정은 인싸일까? 아싸일까? 나의 인싸력을 지금 바로 측정해보세요!">
    <meta property="og:url" content="https://inssado.netlify.app/">
    <meta property="og:image" content="https://inssado.netlify.app/og-image.png">
    <meta name="twitter:card" content="summary_large_image"> 
    <meta name="twitter:title" content="😎 인싸도 계산기 😮">
    <meta name="twitter:description" content="내 인스타그램 계정은 인싸일까? 아싸일까? 나의 인싸력을 지금 바로 측정해보세요!">
    <meta name="twitter:image" content="https://inssado.netlify.app/og-image.png">

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        body { font-family: sans-serif; text-align: center; margin-top: 30px; }
        h1 { color: #E1306C; }
        .container { max-width: 500px; margin: 0 auto; padding: 20px; }
        .input-group { margin: 15px 0; }
        .input-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .input-group input {
            font-size: 1.1em;
            padding: 10px;
            margin: 0;
            width: calc(100% - 24px);
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        
        /* 계산하기 버튼 */
        button {
            font-size: 1.3em;
            padding: 12px 25px;
            cursor: pointer;
            background: linear-gradient(45deg, #405DE6, #5851D8, #833AB4, #C13584, #E1306C, #FD1D1D);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            margin-top: 10px; /* 버튼 간 간격 */
        }
        
        /* 공유 버튼들을 감싸는 래퍼 */
        .button-wrapper {
             display: none; /* 평소엔 숨김 */
             margin-top: 15px;
        }

        /* 이미지 저장 버튼 */
        #saveButton {
            font-size: 1.0em;
            padding: 10px 20px;
            background: #0095F6; /* 파란색 */
        }
        
        /* 링크 공유 버튼 */
        #shareButton {
            font-size: 1.0em;
            padding: 10px 20px;
            background: #25D366; /* 초록색 (공유 느낌) */
        }
        
        /* 결과 표시 영역 */
        #result {
            margin-top: 30px;
            font-size: 1.5em;
            font-weight: bold;
            padding: 30px 20px;
            border-radius: 10px;
            background-color: #f8f8f8;
            border: 1px solid #eee;
            white-space: pre-line;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>😎 인싸도 계산기 😮</h1>
        <p>3가지만 빠르게 입력하고 인싸력을 측정하세요!</p>

        <div class="input-group">
            <label for="followersInput">1. 팔로워 수</label>
            <input type="number" id="followersInput" placeholder="예: 1500">
        </div>
        <div class="input-group">
            <label for="followingInput">2. 팔로잉 수</label>
            <input type="number" id="followingInput" placeholder="예: 450">
        </div>
        <div class="input-group">
            <label for="mediaCountInput">3. 총 게시물 수</label>
            <input type="number" id="mediaCountInput" placeholder="예: 120">
        </div>

        <button onclick="calculate()">내 인싸력은?!</button>

        <div id="result">
            </div>

        <div class="button-wrapper" id="buttonWrapper">
            <button id="saveButton" onclick="saveResultAsImage()">
                스토리에 공유 (이미지 저장) 📸
            </button>
            <button id="shareButton" onclick="shareLink()">
                친구에게 링크 공유하기 🚀
            </button>
        </div>
    </div>

    <script>
        // --- 스크립트 시작 ---

        // V5.2 링크 공유 함수 (Web Share API)
        function shareLink() {
            if (navigator.share) { // Web Share API를 지원하는지 확인
                navigator.share({
                    title: '😎 인싸도 계산기 😮',
                    text: '내 인스타그램 계정은 인싸일까? 아싸일까? 지금 바로 측정해보세요!',
                    url: 'https://inssado.netlify.app/', // 본인 사이트 주소
                })
                .then(() => console.log('링크 공유 성공'))
                .catch((error) => console.log('링크 공유 실패', error));
            } else {
                // Web Share API를 지원하지 않는 브라우저 (예: PC 데스크탑)
                alert("이 브라우저에서는 링크 공유 기능을 지원하지 않습니다.\n주소를 복사하여 공유해주세요!");
            }
        }

        // V5.1 이미지 저장 함수 (html2canvas)
        function saveResultAsImage() {
            const resultElement = document.getElementById('result');
            
            // 팝업 차단 경고
            alert("이미지 저장을 시작합니다.\n\n[주의] 브라우저(크롬 등) 상단에 '팝업 차단' 아이콘이 뜨면, '항상 허용'으로 변경해주세요!");
            
            html2canvas(resultElement).then(function(canvas) {
                const imageUrl = canvas.toDataURL('image/png');
                const downloadLink = document.createElement('a');
                downloadLink.href = imageUrl;
                downloadLink.download = 'my_inssa_result.png'; // 저장될 파일 이름
                
                document.body.appendChild(downloadLink);
                downloadLink.click(); // 이 부분이 팝업으로 차단될 수 있음
                document.body.removeChild(downloadLink);

                // 저장 후 안내
                alert("스토리 공유용 이미지가 갤러리에 저장되었습니다!\n\n(혹시 저장이 안 됐다면?)\n1. 팝업 차단을 해제하세요.\n2. (모바일) 이미지가 새 탭으로 열리면, 사진을 꾹 눌러 '이미지 저장'을 선택하세요.");
            });
        }

        // V4.0 메인 계산 함수 (세분화 로직 적용)
        function calculate() {
            // 1. 모든 입력 값 가져오기
            let followers = parseInt(document.getElementById('followersInput').value) || 0;
            let following = parseInt(document.getElementById('followingInput').value) || 0;
            let mediaCount = parseInt(document.getElementById('mediaCountInput').value) || 0;

            // 2. 유효성 검사
            if (followers < 0 || following < 0 || mediaCount < 0) {
                document.getElementById('result').innerText = "숫자는 0 이상이어야 합니다.";
                return;
            }
            if (followers === 0 && mediaCount === 0) {
                document.getElementById('result').innerText = "유령 계정은 측정할 수 없어요! 👻";
                return;
            }

            // 3. '아싸' 그룹 세분화 기준값
            const ASSA_THRESHOLD = 150; 
            const MEDIA_MANY_THRESHOLD = 150;
            const MEDIA_LOW_THRESHOLD = 30;

            // '아싸' 그룹 판별 (팔로워 150 미만)
            if (followers < ASSA_THRESHOLD) {
                let resultType;
                
                if (following > followers * 2 && following > 100) { 
                    resultType = "프로 탐색러 🕵️ (트렌드 사냥꾼)";
                } 
                else if (mediaCount >= MEDIA_MANY_THRESHOLD) {
                    resultType = "아싸 (기록형) 📝 (나만의 일기장)";
                } 
                else if (mediaCount >= MEDIA_LOW_THRESHOLD) {
                    resultType = "아싸 (소셜형) 😢 (조용한 관찰자)";
                } 
                else {
                    resultType = "아싸 (유령) 👻 (존재감 제로)";
                }
                
                // 아싸 결과 표시
                document.getElementById('result').innerText = `당신의 타입:\n${resultType}`;
                document.getElementById('buttonWrapper').style.display = 'block'; // 공유 버튼 표시
                return; // 점수 계산 없이 함수 종료
            }

            // --- (여기부터는 팔로워 150명 이상인 사용자만 해당) ---

            // 4. 점수 로직 (덧셈 방식)
            let ratio = (following > 0) ? (followers / following) : (followers > 0 ? Infinity : 0);

            // 점수 1: 영향력 (팔로워 수) (최대 50점)
            let score1 = 10;
            if (followers >= 10000) score1 = 50;
            else if (followers >= 5000) score1 = 45;
            else if (followers >= 1000) score1 = 35;
            else if (followers >= 500) score1 = 25;
            else if (followers >= 200) score1 = 15;

            // 점수 2: 소셜력 (비율) (최대 30점)
            let score2 = 5;
            if (ratio >= 3.0) score2 = 30;
            else if (ratio >= 2.0) score2 = 25;
            else if (ratio >= 0.8) score2 = 20;
            else if (ratio >= 0.5) score2 = 10;

            // 점수 3: 꾸준함 (게시물 수) (최대 20점) (보너스)
            let score3 = 0;
            if (mediaCount >= MEDIA_MANY_THRESHOLD) score3 = 20; // 150개 이상
            else if (mediaCount >= 100) score3 = 15;
            else if (mediaCount >= 50) score3 = 10;
            else if (mediaCount >= 10) score3 = 5;

            // 5. 총점 계산
            let totalScore = score1 + score2 + score3;
            if (totalScore > 100) totalScore = 100;

            // 6. 결과 판정: '인싸' 및 '일반인' 세분화
            const LOW_MEDIA_THRESHOLD_INSSA = 50; 
            let resultType;

            if (totalScore >= 90) {
                resultType = "인플루언서 👑 (당신은 슈퍼스타!)";
            } 
            else if (totalScore >= 70) {
                resultType = (mediaCount < LOW_MEDIA_THRESHOLD_INSSA) ? "핵인싸 (스토리형) 🤫 (숨은 고수)" : "핵인싸 (클래식) 🎉 (파티의 중심)";
            } 
            else if (totalScore >= 50) {
                resultType = (mediaCount < LOW_MEDIA_THRESHOLD_INSSA) ? "샤이 인싸 💖 (스토리/소통형)" : "인싸 💖 (적극적 소통가)";
            } 
            else {
                // '일반인' 세분화 (총점 50 미만)
                if (mediaCount >= MEDIA_MANY_THRESHOLD) {
                    resultType = "일반인 (헤비 유저) 📸 (일상 공유가)";
                } 
                else if (mediaCount >= MEDIA_LOW_THRESHOLD) {
                    resultType = "일반인 (표준) ☕ (균형잡힌 마이웨이)";
                } 
                else {
                    resultType = "일반인 (눈팅족) 🤫 (보기만 할게요)";
                }
            }
            
            // 7. 결과 표시
            document.getElementById('result').innerText = `당신의 인싸 점수는 [ ${totalScore}점 ]\n타입: ${resultType}`;
            
            // 8. 공유 버튼 래퍼 표시
            document.getElementById('buttonWrapper').style.display = 'block';
        }
    </script>

</body>
</html>